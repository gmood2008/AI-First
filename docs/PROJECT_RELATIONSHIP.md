# AI-First é¡¹ç›®å…³ç³»è¯´æ˜

## é¡¹ç›®æ¶æ„

AI-First ç”Ÿæ€ç³»ç»Ÿç”±ä¸¤ä¸ªæ ¸å¿ƒé¡¹ç›®ç»„æˆï¼Œå®ƒä»¬é€šè¿‡**ç»„åˆå…³ç³»**ç´§å¯†åä½œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AI-First ç”Ÿæ€ç³»ç»Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ai-first-specs      â”‚      â”‚  ai-first-runtime    â”‚   â”‚
â”‚  â”‚  (èƒ½åŠ›è§„èŒƒä»“åº“)      â”‚â—„â”€â”€â”€â”€â”€â”¤  (è¿è¡Œæ—¶ä»“åº“)        â”‚   â”‚
â”‚  â”‚                      â”‚      â”‚                      â”‚   â”‚
â”‚  â”‚  â€¢ YAML è§„èŒƒæ–‡ä»¶     â”‚      â”‚  â€¢ Handler å®ç°      â”‚   â”‚
â”‚  â”‚  â€¢ èƒ½åŠ›å®šä¹‰          â”‚      â”‚  â€¢ æ‰§è¡Œå¼•æ“         â”‚   â”‚
â”‚  â”‚  â€¢ æ¥å£æè¿°          â”‚      â”‚  â€¢ MCP Server       â”‚   â”‚
â”‚  â”‚  â€¢ å…ƒæ•°æ®            â”‚      â”‚  â€¢ æ³¨å†Œè¡¨           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â–²                              â”‚                  â”‚
â”‚           â”‚                              â”‚                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»„åˆå…³ç³» â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                    (è¿è¡Œæ—¶è°ƒç”¨è§„èŒƒ)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç»„åˆå…³ç³»è¯¦è§£

### 1. é¡¹ç›®èŒè´£åˆ†ç¦»

#### ai-first-specsï¼ˆèƒ½åŠ›è§„èŒƒä»“åº“ï¼‰
- **èŒè´£**: å®šä¹‰èƒ½åŠ›çš„"å¥‘çº¦"ï¼ˆContractï¼‰
- **å†…å®¹**: YAML æ ¼å¼çš„èƒ½åŠ›è§„èŒƒæ–‡ä»¶
- **ä½œç”¨**: æè¿°èƒ½åŠ›åšä»€ä¹ˆï¼Œä¸å…³å¿ƒå¦‚ä½•å®ç°
- **ä½ç½®**: `/Users/daniel/AIé¡¹ç›®/äº‘ç«¯åŒæ­¥é¡¹ç›®/ai-first-specs`

#### ai-first-runtimeï¼ˆè¿è¡Œæ—¶ä»“åº“ï¼‰
- **èŒè´£**: å®ç°å’Œæ‰§è¡Œèƒ½åŠ›
- **å†…å®¹**: Python Handler å®ç°ã€æ‰§è¡Œå¼•æ“ã€MCP Server
- **ä½œç”¨**: æ ¹æ®è§„èŒƒæ‰§è¡Œå®é™…å·¥ä½œ
- **ä½ç½®**: `/Users/daniel/AIé¡¹ç›®/äº‘ç«¯åŒæ­¥é¡¹ç›®/ai-first-runtime-master`

### 2. è¿æ¥æ–¹å¼

#### æ–¹å¼ 1: ç¬¦å·é“¾æ¥ï¼ˆå½“å‰ä½¿ç”¨ï¼‰
```bash
ai-first-runtime-master/
â””â”€â”€ capabilities/validated/stdlib
    â””â”€â”€ (ç¬¦å·é“¾æ¥) â†’ ../ai-first-specs/capabilities/validated/stdlib
```

**ä¼˜ç‚¹**:
- èŠ‚çœç£ç›˜ç©ºé—´
- è‡ªåŠ¨åŒæ­¥æ›´æ–°
- ä¿æŒä¸¤ä¸ªä»“åº“ç‹¬ç«‹

#### æ–¹å¼ 2: ç¯å¢ƒå˜é‡
```bash
export AI_FIRST_SPECS_DIR=/path/to/ai-first-specs/capabilities/validated/stdlib
```

#### æ–¹å¼ 3: è‡ªåŠ¨æ£€æµ‹ï¼ˆå…„å¼Ÿç›®å½•ï¼‰
è¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹åŒçº§ç›®å½•ä¸‹çš„ `ai-first-specs` ä»“åº“

### 3. è¿è¡Œæ—¶è°ƒç”¨æµç¨‹

```
å¯åŠ¨ ai-first-runtime
    â”‚
    â”œâ”€â–º 1. è§£æ specs ç›®å½•è·¯å¾„
    â”‚      (é€šè¿‡ specs_resolver.py)
    â”‚      â†“
    â”‚   æ‰¾åˆ°: ai-first-specs/capabilities/validated/stdlib
    â”‚
    â”œâ”€â–º 2. åŠ è½½èƒ½åŠ›è§„èŒƒ
    â”‚      (é€šè¿‡ stdlib/loader.py)
    â”‚      â†“
    â”‚   è¯»å– YAML æ–‡ä»¶ (æ¥è‡ª ai-first-specs)
    â”‚      â†“
    â”‚   è§£æè§„èŒƒ: è¾“å…¥ã€è¾“å‡ºã€é£é™©ã€å‰¯ä½œç”¨ç­‰
    â”‚
    â”œâ”€â–º 3. åˆ›å»º Handler å®ä¾‹
    â”‚      (ä½¿ç”¨ ai-first-runtime ä¸­çš„ Handler ç±»)
    â”‚      â†“
    â”‚   handler = HandlerClass(spec_dict)
    â”‚      â†“
    â”‚   spec_dict æ¥è‡ª ai-first-specs
    â”‚   HandlerClass æ¥è‡ª ai-first-runtime
    â”‚
    â”œâ”€â–º 4. æ³¨å†Œåˆ°èƒ½åŠ›æ³¨å†Œè¡¨
    â”‚      (CapabilityRegistry)
    â”‚      â†“
    â”‚   èƒ½åŠ› ID â†’ Handler å®ä¾‹
    â”‚
    â””â”€â–º 5. æä¾›æœåŠ¡
          (MCP Server / Runtime Engine)
          â†“
        æ‰§è¡Œèƒ½åŠ›æ—¶:
        - ä½¿ç”¨ Handler å®ç° (runtime)
        - éµå¾ªè§„èŒƒå®šä¹‰ (specs)
```

## æ•°æ®æµå‘

### è§„èŒƒ â†’ è¿è¡Œæ—¶

```
ai-first-specs (YAML)
    â”‚
    â”‚ è¯»å–
    â†“
ai-first-runtime (åŠ è½½å™¨)
    â”‚
    â”‚ è§£æ
    â†“
Handler å®ä¾‹ (ä½¿ç”¨è§„èŒƒåˆå§‹åŒ–)
    â”‚
    â”‚ æ³¨å†Œ
    â†“
èƒ½åŠ›æ³¨å†Œè¡¨ (Registry)
    â”‚
    â”‚ æ‰§è¡Œ
    â†“
è¿è¡Œæ—¶å¼•æ“ (RuntimeEngine)
```

### æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â†“
MCP Server (ai-first-runtime)
    â”‚
    â†“
æŸ¥æ‰¾èƒ½åŠ› (åœ¨æ³¨å†Œè¡¨ä¸­)
    â”‚
    â†“
è·å– Handler (ai-first-runtime å®ç°)
    â”‚
    â†“
è¯»å–è§„èŒƒ (ai-first-specs YAML)
    â”‚
    â†“
æ‰§è¡Œ Handler.execute()
    â”‚
    â†“
è¿”å›ç»“æœ
```

## å…³é”®ä»£ç ä½ç½®

### 1. è§„èŒƒè§£æ
- **æ–‡ä»¶**: `src/runtime/mcp/specs_resolver.py`
- **åŠŸèƒ½**: è§£æ ai-first-specs ç›®å½•è·¯å¾„
- **æ–¹æ³•**: `resolve_specs_dir()`

### 2. è§„èŒƒåŠ è½½
- **æ–‡ä»¶**: `src/runtime/stdlib/loader.py`
- **åŠŸèƒ½**: ä» ai-first-specs è¯»å– YAML å¹¶åˆ›å»º Handler
- **æ–¹æ³•**: `load_stdlib()`

### 3. Handler åˆ›å»º
- **æ–‡ä»¶**: `src/runtime/stdlib/loader.py` (ç¬¬ 147 è¡Œ)
- **ä»£ç **: `handler = handler_class(spec_dict)`
- **è¯´æ˜**: 
  - `handler_class`: æ¥è‡ª ai-first-runtime (å¦‚ `ReadFileHandler`)
  - `spec_dict`: æ¥è‡ª ai-first-specs (YAML è§£æç»“æœ)

### 4. èƒ½åŠ›æ³¨å†Œ
- **æ–‡ä»¶**: `src/runtime/registry.py`
- **åŠŸèƒ½**: å°† Handler æ³¨å†Œåˆ°æ³¨å†Œè¡¨
- **æ–¹æ³•**: `registry.register(capability_id, handler, spec_dict)`

## å®é™…éªŒè¯

### æ£€æŸ¥è¿æ¥çŠ¶æ€

```bash
# 1. æ£€æŸ¥ç¬¦å·é“¾æ¥
ls -la capabilities/validated/stdlib

# 2. æ£€æŸ¥è·¯å¾„è§£æ
python3 -c "
from src.runtime.mcp.specs_resolver import resolve_specs_dir
print(resolve_specs_dir())
"

# 3. æµ‹è¯•åŠ è½½
python3 -c "
from src.runtime.registry import CapabilityRegistry
from src.runtime.stdlib.loader import load_stdlib
from pathlib import Path

registry = CapabilityRegistry()
load_stdlib(registry, Path('capabilities/validated/stdlib'))
print(f'åŠ è½½äº† {len(registry.list_capabilities())} ä¸ªèƒ½åŠ›')
"
```

## æ€»ç»“

### âœ… æ˜¯çš„ï¼Œå®ƒä»¬æ˜¯ç»„åˆå…³ç³»

1. **ai-first-runtime** ä¾èµ– **ai-first-specs** æ¥è·å–èƒ½åŠ›è§„èŒƒ
2. **ai-first-runtime** åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ **ai-first-specs** ä¸­çš„ YAML æ–‡ä»¶
3. ä¸¤ä¸ªé¡¹ç›®é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼ˆç¬¦å·é“¾æ¥/ç¯å¢ƒå˜é‡ï¼‰"æ‰“é€š"
4. è¿è¡Œæ—¶å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åŠ è½½ specs ä¸­çš„èƒ½åŠ›å®šä¹‰

### ğŸ”— è¿æ¥æ–¹å¼

- **ç¬¦å·é“¾æ¥**: `capabilities/validated/stdlib` â†’ `../ai-first-specs/capabilities/validated/stdlib`
- **è‡ªåŠ¨æ£€æµ‹**: é€šè¿‡ `specs_resolver.py` è‡ªåŠ¨æŸ¥æ‰¾å…„å¼Ÿç›®å½•
- **ç¯å¢ƒå˜é‡**: `AI_FIRST_SPECS_DIR` æ˜¾å¼æŒ‡å®šè·¯å¾„
- **è¿œç¨‹åŠ è½½**: å¦‚æœæœ¬åœ°æ‰¾ä¸åˆ°ï¼Œä» GitHub åŠ è½½ï¼ˆæ–°åŠŸèƒ½ï¼‰

### ğŸ“Š æ•°æ®æµ

```
ai-first-specs (è§„èŒƒå®šä¹‰)
    â†“ è¯»å–
ai-first-runtime (åŠ è½½è§„èŒƒ)
    â†“ åˆ›å»º
Handler å®ä¾‹ (è§„èŒƒ + å®ç°)
    â†“ æ³¨å†Œ
èƒ½åŠ›æ³¨å†Œè¡¨
    â†“ æ‰§è¡Œ
è¿è¡Œæ—¶å¼•æ“
```

**ç»“è®º**: ä¸¤ä¸ªé¡¹ç›®æ˜¯**ç´§å¯†è€¦åˆçš„ç»„åˆå…³ç³»**ï¼Œè¿è¡Œæ—¶åœ¨å¯åŠ¨å’Œæ‰§è¡Œè¿‡ç¨‹ä¸­éƒ½ä¼šè°ƒç”¨ specs ä»“åº“ä¸­çš„èƒ½åŠ›å®šä¹‰ã€‚
